<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>React Keydown by jedverity</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">React Keydown</h1>
      <h2 class="project-tagline">Lightweight keydown wrapper for React components</h2>
      <a href="https://github.com/jedverity/react-keydown" class="btn">View on GitHub</a>
      <a href="https://github.com/jedverity/react-keydown/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jedverity/react-keydown/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="react-keydown" class="anchor" href="#react-keydown" aria-hidden="true"><span class="octicon octicon-link"></span></a>React Keydown</h1>

<blockquote>
<p>Lightweight keydown wrapper for React components.</p>
</blockquote>

<p>Use react-keydown as a higher-order component or decorator to pass keydown
events to the wrapped component, or call methods directly via designated keys. Good 
for implementing keyboard navigation or other shortcuts.</p>

<p>Key advantages:</p>

<ul>
<li>
<strong>Declarative syntax</strong>: Components say what keys they will respond to.</li>
<li>
<strong>Intuitive DX</strong>: Decorate a class or method to bind it to specified keys.</li>
<li>
<strong>Scoping</strong>: Designate the scope of your bindings by decorating/wrapping components. Only those components and their children will receive the designated key events.</li>
<li>
<strong>Modifier keys</strong>: Support for standard modifier key combinations.</li>
<li>
<strong>Tiny</strong>: 2kb compressed and gzipped (with UMD module wrapping -- smaller
without it).</li>
</ul>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h2>

<pre><code>npm install --save react-keydown
</code></pre>

<h2>
<a id="use" class="anchor" href="#use" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use</h2>

<h3>
<a id="for-methods-decorate-with-keys-that-should-trigger-method" class="anchor" href="#for-methods-decorate-with-keys-that-should-trigger-method" aria-hidden="true"><span class="octicon octicon-link"></span></a>For methods: Decorate with keys that should trigger method</h3>

<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> React <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>react<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span> keydown <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>react-keydown<span class="pl-pds">'</span></span>;

<span class="pl-k">class</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-en">React.Component</span> {

  ...

  @keydown( <span class="pl-s"><span class="pl-pds">'</span>enter<span class="pl-pds">'</span></span> ) <span class="pl-c">// or specify `which` code directly, in this case 13</span>
  <span class="pl-en">submit</span>() {
    MyApi.post( <span class="pl-v">this</span>.state );
  }
}</pre></div>

<p>Note: The keydown event will be passed to the decorated method for further
processing, if desired. For example, you may went to <code>event.preventDefault()</code>.</p>

<h4>
<a id="specify-multiple-keys-that-should-trigger-the-method" class="anchor" href="#specify-multiple-keys-that-should-trigger-the-method" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specify multiple keys that should trigger the method</h4>

<div class="highlight highlight-source-js"><pre>@keydown( <span class="pl-s"><span class="pl-pds">'</span>enter<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>tab<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>ctrl+z<span class="pl-pds">'</span></span> )
<span class="pl-en">autocomplete</span>() {
  MyApi.get( <span class="pl-v">this</span>.state );
}</pre></div>

<h3>
<a id="for-classes-pass-keydown-events-into-your-component" class="anchor" href="#for-classes-pass-keydown-events-into-your-component" aria-hidden="true"><span class="octicon octicon-link"></span></a>For classes: Pass keydown events into your component</h3>

<div class="highlight highlight-source-js-jsx"><pre><span class="pl-k">import</span><span class="pl-smi"> React</span><span class="pl-k"> from</span><span class="pl-s"><span class="pl-pds"> '</span>react<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span><span class="pl-smi"> keydown</span><span class="pl-k"> from</span><span class="pl-s"><span class="pl-pds"> '</span>react-keydown<span class="pl-pds">'</span></span>;

<span class="pl-k">class</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-en">React</span><span class="pl-k">.</span><span class="pl-smi">Component</span> {

  <span class="pl-en">constructor</span>(<span class="pl-smi"> props</span> ) {
    <span class="pl-en">super</span>(<span class="pl-smi"> props</span> );
  }

  <span class="pl-en">componentWillReceiveProps</span>( {<span class="pl-smi"> keydown</span> } ) {
<span class="pl-k">    if</span> (<span class="pl-smi"> keydown</span><span class="pl-k">.</span><span class="pl-smi">event</span> ) {
<span class="pl-c">      // inspect the keydown event and decide what to do</span>
      <span class="pl-c1">console</span><span class="pl-k">.</span><span class="pl-c1">log</span>(<span class="pl-smi"> keydown</span><span class="pl-k">.</span><span class="pl-smi">event</span><span class="pl-k">.</span><span class="pl-smi">which</span> );
    }
  }

  <span class="pl-en">render</span>() {
<span class="pl-k">    return</span> (
      &lt;<span class="pl-ent">div</span>&gt;keydown events will only get passed down after this DOM node mounts or is clicked on&lt;/<span class="pl-ent">div</span>&gt;
    );
  }
}

<span class="pl-k">export default</span> <span class="pl-en">keydown</span>(<span class="pl-smi"> MyComponent</span> );</pre></div>

<h4>
<a id="use-decorator-pattern" class="anchor" href="#use-decorator-pattern" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use decorator pattern:</h4>

<div class="highlight highlight-source-js"><pre>@keydown
<span class="pl-k">class</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-en">React.Component</span> {
  ...
}

<span class="pl-k">export</span> <span class="pl-k">default</span> MyComponent;</pre></div>

<h4>
<a id="monitor-only-key-codes-which-you-care-about" class="anchor" href="#monitor-only-key-codes-which-you-care-about" aria-hidden="true"><span class="octicon octicon-link"></span></a>Monitor only key codes <code>which</code> you care about:</h4>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">KEYS</span> <span class="pl-k">=</span> [ <span class="pl-s"><span class="pl-pds">'</span>shift+up<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>shift+down<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>enter<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>j<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>k<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>h<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>l<span class="pl-pds">'</span></span> ];

@keydown( <span class="pl-c1">KEYS</span> )
<span class="pl-k">class</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-en">React.Component</span> {
  ...
}</pre></div>

<h4>
<a id="use-the-keydownscoped-shortcut" class="anchor" href="#use-the-keydownscoped-shortcut" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use the <code>@keydownScoped</code> shortcut</h4>

<p>When using the class decorator/higher-order component, decorate methods with <code>@keydownScoped</code> to identify the <code>keydown.event</code> prop as it comes in and bind certain values to methods:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> keydown, { keydownScoped } <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>react-keydown<span class="pl-pds">'</span></span>;

@keydown( <span class="pl-s"><span class="pl-pds">'</span>enter<span class="pl-pds">'</span></span> ) <span class="pl-c">// optional to specify a key here. if called with just @keydown, all key events will get passed down</span>
<span class="pl-k">class</span> <span class="pl-en">MyComponent</span> <span class="pl-k">extends</span> <span class="pl-en">React.Component</span> {
  <span class="pl-en">render</span>() {
    <span class="pl-k">return</span> <span class="pl-k">&lt;</span>MyOtherComponent {...this.props} <span class="pl-k">/&gt;</span>;
  }
}

<span class="pl-k">class</span> <span class="pl-en">MyOtherComponent</span> <span class="pl-k">extends</span> <span class="pl-en">React.Component</span> {
  ...
  @keydownScoped( <span class="pl-s"><span class="pl-pds">'</span>enter<span class="pl-pds">'</span></span> ) <span class="pl-c">// inspects nextProps.keydown.event in componentWillReceiveProps behind the scenes</span>
  <span class="pl-en">submit</span>() {
    <span class="pl-c">// submit</span>
  }
}</pre></div>

<p>This is a convenience method, but also lets you specify a larger view context where this key binding should be active. Sometimes the component where the binding is declared is too small on its own.</p>

<p>This can also be a good way to set up app-wide shortcuts. Wrap your root component with <code>@keydown</code> and then use  <code>@keydownScoped</code> or manually inspect the <code>keydown.event</code> props in the child components where those bindings are relevant.</p>

<h2>
<a id="demo" class="anchor" href="#demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Demo</h2>

<p>Go to the <a href="http://jedverity.github.io/react-keydown/example/index.html">live
demo</a> or:</p>

<pre><code>$ open example/public/index.html
</code></pre>

<p>Note that this is very much a work in progress!</p>

<h2>
<a id="notes-and-disclaimers" class="anchor" href="#notes-and-disclaimers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes and disclaimers</h2>

<ul>
<li>The decorator pattern <code>@keydown</code> currently requires transpilation by
<a href="babeljs.io/">Babel</a> (set to
stage 1) or the equivalent</li>
<li>This lib has only been tested using ES2015 classes. Some method decoration
functionality may work on other types of object methods.</li>
<li>In order to avoid unintended side effects, only one component (and its children) can receive
keydown events at a time (the most recently mounted, clicked, or focused component). If you want multiple<br>
components to receive keydown events simultaneously, decorate a common ancestor component class with <code>@keydown</code>     and then decorate your methods in the child components with <code>@keydownScoped( myKeyCode )</code> (or manually work with    the keydown.event props flowing into your components). For example, if you want app-wide shortcuts, decorate (or    wrap) the root component with <code>@keydown</code> and then all descendent components will receive the <code>keydown.event</code> prop   when a key is pressed.</li>
<li>Since the only context we have for keydown events is the component, decorated
methods receive the event as their sole argument and the component instance as
context.</li>
<li>The method decorators wrap React lifecycle methods in order to work
as seamlessly and efficiently as possible. The class decorator does not do
this, functioning instead as a higher-order component.</li>
</ul>

<h2>
<a id="questions" class="anchor" href="#questions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Questions</h2>

<p>Why is this so limited, only working on <code>keydown</code> and such?</p>

<blockquote>
<p>I published this out of my particular need on a project. If anyone else ever
arrives here and needs something else let me know via issues or a pull request.</p>
</blockquote>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jedverity/react-keydown">React Keydown</a> is maintained by <a href="https://github.com/jedverity">jedverity</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
